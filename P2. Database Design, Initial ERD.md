# P2. Database Design, Initial ERD

## Business Rules

- A `Car` is owned by a `CarBrand`, and is manufactured using multiple `Parts`, inside an `AssemblyUnit`
- A `CarBrand` may have multiple `AssemblyUnits`

## Entities

- `Car`: Represents a car. A car will have an associated `CarType`
- `CarBrand`: Represents a car brand.
  - `AssemblyUnit`: Represents an assembly unit oned by a that assembles parts into a `Car`.
- `Supplier`: Represents a supplier with attributes like `name` and `address_id`. It is related to an `Address`.
- `Manufacturer`: Represents a manufacturer with attributes like `name` and `address_id`. It is related to an `Address` and has relationships with `Batch` and `Purchase`.
- `Address`: Represents an address with attributes such as `street`, `city`, `zip`, `latitude`, `longitude`, and has relationships with `CarBrand`, `Supplier`, `Manufacturer`, and `AssemblyUnit`.
- `Transport`: Represents a mode of transport with attributes like `name` and `type_id`. It is related to a `TransportType` and has relationships with `Sales` and `Purchase`.
  - `TransportType`: Describes the type of transport with a `description` and has a relationship with `Transport`.
- `Part`: Represents a part with attributes like `name` and `description` and has a relationship with `Batch`.
- `Batch`: Represents a batch of parts with attributes like `part_id`, `cost`, and `manufacturer_id`. It is related to `Part`, `Manufacturer`, and has relationships with `Stock`, `SalesRow`, and `PurchaseRow`.
- `Stock`: Represents the stock of a batch with attributes `batchId` and `quantity`, related to `Batch`.
- `Sales`: Represents a sale with attributes `sale_to_id`, `sale_by_id`, and `transported_by_id`. It is related to `Transport`, `AssemblyUnit`, and `User` and has relationships with `SalesRow`.
  - `SalesRow`: Represents a row in a sales transaction with attributes like `part_batch_id`, `quantity`, and `sale_id`. It is related to `Batch` and `Sales`.
- `Purchase`: Represents a purchase with attributes `purchase_from_id`, `purchase_by_id`, and `transported_by_id`. It is related to `Transport`, `Manufacturer`, and `User` and has relationships with `PurchaseRow`.
  - `PurchaseRow`: Represents a row in a purchase transaction with attributes like `part_batch_id`, `quantity`, and `purchase_id`. It is related to `Batch` and `Purchase`.
- `User`: Represents a user of the application. A user can make either a `Sale` or a `Purchase`.


## ER Diagram
![](diagrams/erd.png)

## Database Diagram
![](diagrams/database-diagram.png)
